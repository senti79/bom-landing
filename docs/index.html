<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>bom-landing preview</title>
    <style>
      body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 24px; line-height: 1.5; }
      header { margin-bottom: 16px; }
      pre { background: #f6f8fa; padding: 12px; border-radius: 6px; overflow: auto; }
      .hero { padding: 24px; border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 16px; }
      .features { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 12px; }
      .feature { border: 1px solid #e5e7eb; border-radius: 8px; padding: 12px; }
      .muted { color: #6b7280; }
    </style>
  </head>
  <body>
    <header>
      <h1>bom-landing JSON Preview</h1>
      <p class="muted">docs/content/landing.json을 불러와 간단히 렌더링합니다.</p>
    </header>

    <main id="app">
      <p>로딩 중...</p>
    </main>

    <h3>Raw JSON</h3>
    <pre id="raw"></pre>

    <script>
      async function load() {
        const url = './content/landing.json?v=' + new Date().toISOString().slice(0,10);
        const res = await fetch(url, { cache: 'no-store' });
        if (!res.ok) throw new Error('Failed to load landing.json');
        const data = await res.json();

        // Render
        const app = document.getElementById('app');
        app.innerHTML = '';

        const title = document.createElement('h2');
        title.textContent = data.title || '제목 없음';
        app.appendChild(title);

        for (const section of (data.sections || [])) {
          if (section.type === 'hero') {
            const hero = document.createElement('section');
            hero.className = 'hero';
            const h = document.createElement('h3');
            h.textContent = section.headline || '헤드라인';
            const p = document.createElement('p');
            p.className = 'muted';
            p.textContent = section.sub || '';
            hero.appendChild(h);
            hero.appendChild(p);
            if (section.cta && section.cta.href && section.cta.label) {
              const a = document.createElement('a');
              a.href = section.cta.href; a.textContent = section.cta.label; a.style.display='inline-block'; a.style.marginTop='8px';
              hero.appendChild(a);
            }
            app.appendChild(hero);
          } else if (section.type === 'feature' && Array.isArray(section.items)) {
            const wrap = document.createElement('section');
            const h = document.createElement('h3');
            h.textContent = 'Features';
            wrap.appendChild(h);
            const grid = document.createElement('div');
            grid.className = 'features';
            for (const it of section.items) {
              const card = document.createElement('div');
              card.className = 'feature';
              const t = document.createElement('div');
              t.textContent = (it.icon ? it.icon + ' ' : '') + (it.title || '');
              const d = document.createElement('div');
              d.className = 'muted';
              d.textContent = it.desc || '';
              card.appendChild(t);
              card.appendChild(d);
              grid.appendChild(card);
            }
            wrap.appendChild(grid);
            app.appendChild(wrap);
          }
        }

        document.getElementById('raw').textContent = JSON.stringify(data, null, 2);
      }

      load().catch(err => {
        document.getElementById('app').textContent = '로드 실패: ' + err.message;
      });
    </script>
  </body>
  </html>

